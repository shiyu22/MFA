{"version":3,"sources":["contexts/RootContext.jsx","Consts.js","contexts/QueryContext.jsx","components/Spinner.jsx","Icons.js","Helper.js","Identity.jsx","Register.jsx","App.js","serviceWorker.js","index.js"],"names":["rootContext","React","createContext","Provider","Alert","props","elevation","variant","RootProvider","children","useState","dialog","setDialog","open","message","onClose","snakebar","setSnackbar","value","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","severity","endpoint","window","_env_","API_URL","server","insert","search","Limit_Record_Time","Limit_Record","Limit_Count_Down","countdownTime","text_read","Text_Read","route","color","Text","axiosInstance","axios","create","queryContext","QueryProvider","useContext","params","a","post","catch","err","res","data","Spinner","className","Logo","toWav","require","addAudioVideo","blob","form","type","indexOf","offlineAudioContext","OfflineAudioContext","sampleRate","soundSource","createBufferSource","audioContext","AudioContext","webkitAudioContext","arrayBuffer","then","audioBuffer","decodeAudioData","decodedAudioData","myBuffer","buffer","connect","destination","start","startRendering","renderedBuffer","wav","_blob","Blob","DataView","name","append","addPhotoAndQuery","shouldExecute","query","handleRes","video","document","querySelector","onplay","setTimeout","canvas","createElement","photo","body","appendChild","context","getContext","width","height","drawImage","img","dataURI","byteString","split","atob","unescape","mimeString","ia","Uint8Array","length","i","charCodeAt","DataURIToBlob","toDataURL","getButtonText","text","button_text","Identity","classes","makeStyles","buttonRoot","margin","contained","background","loading","setLoading","cameraOn","setCameraOn","recording","setRecording","valid_res","setValidRes","Link","useRef","Form","FormData","isFirstRun","showLogo","useEffect","button","container","innerHTML","div","link","href","style","current","resolveRes","string","arr","slice","map","Array","isArray","src","location","reload","dangerouslySetInnerHTML","__html","onTurnOnCamera","classList","add","camera","onStartRecording","onRecordingComplete","videoBlob","showReplayControls","timeLimit","isFlipped","replayVideoAutoplayAndLoopOff","renderDisconnectedView","renderLoadingView","display","justifyContent","alignItems","flexDirection","alter","alt","fontSize","Button","root","size","onClick","pathname","Register","matches","useMediaQuery","marginBottom","borderColor","borderWidth","borderLeftWidth","padding","input","setName","buttonRef","disabled","status","TextField","placeholder","onChange","e","target","remove","InputProps","video_build","App","path","component","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","error","console"],"mappings":"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","file":"static/js/main.f2f70cdc.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nexport const rootContext = React.createContext({});\nconst { Provider } = rootContext;\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n// put global singletons here: dialog, tooltip...\nconst RootProvider = ({ children }) => {\n  // dialog state\n  const [dialog, setDialog] = useState({});\n  const [snakebar, setSnackbar] = useState({\n    open: false,\n    message: \"\",\n    onClose: null,\n  });\n\n  return (\n    <Provider\n      value={{\n        dialog,\n        setDialog,\n        snakebar,\n        setSnackbar,\n      }}\n    >\n      {children}\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n        open={snakebar.open}\n        autoHideDuration={60000}\n        onClose={snakebar.onClose}\n      >\n        <Alert severity=\"error\" onClose={snakebar.onClose}>\n          {snakebar.message || \"\"}\n        </Alert>\n      </Snackbar>\n    </Provider>\n  );\n};\n\nexport default RootProvider;\n","let endpoint = `https://192.168.1.85:5006`;\nif (window._env_ && window._env_.API_URL) {\n  endpoint = window._env_.API_URL;\n}\n\n// endpoint\nconst insert = `${endpoint}/api/v1/insert`;\nconst search = `${endpoint}/api/v1/search`;\nexport const server = {\n  insert,\n  search,\n};\n\n// Limits\nlet Limit_Record_Time = 5000;\nif (window._env_ && window._env_.Limit_Record_Time) {\n  Limit_Record_Time = window._env_.Limit_Record_Time;\n}\nexport const Limit_Record = Limit_Record_Time;\n\nlet Limit_Count_Down = 1000;\nif (window._env_ && window._env_.Limit_Count_Down) {\n  Limit_Count_Down = window._env_.Limit_Count_Down;\n}\nexport const countdownTime = Limit_Count_Down;\n\nlet text_read = \"Milvus is the Best！\";\nif (window._env_ && window._env_.Text_Read) {\n  text_read = window._env_.Text_Read;\n}\nexport const Text_Read = text_read;\n\n// route\nexport const route = {\n  register: \"register\",\n  identity: \"/\",\n};\n\n//colors\nexport const color = {\n  main: `#4fc4f9`,\n  text: `#fff`,\n  hint: `#ccc`,\n};\n\nexport const Text = {\n  fail_to_insert: `Insert fail. Please aim at the camera and keep no noise around.`,\n  note_to_record: `After starting to record, please point the camera and read whatever you like for about 5 seconds. `,\n  for_example: `E.g.`,\n  unAuthorized:\n    \"Unauthorized! Please make sure you have registed, be sure to aim at the camera and follow the text prompts for voice verification.\",\n  fail_to_identify: `Something is wrong with server, please try later`,\n};\n","import React, { createContext, useContext } from \"react\";\nimport { rootContext } from \"./RootContext\";\nimport axios from \"axios\";\nimport { server } from \"../Consts\";\nconst axiosInstance = axios.create();\n\nexport const queryContext = createContext({});\nconst Provider = queryContext.Provider;\n\nconst QueryProvider = ({ children }) => {\n  const { setSnackbar } = useContext(rootContext);\n  const search = async (params) => {\n    const res = await axiosInstance.post(server.search, params).catch((err) => {\n      setSnackbar({ open: true, message: \"receive bad request\" });\n    });\n    return res && res.data;\n  };\n  const insert = async (params) => {\n    const res = await axiosInstance.post(server.insert, params);\n    return res && res.data;\n  };\n  return <Provider value={{ search, insert }}>{children}</Provider>;\n};\n\nexport default QueryProvider;\n","import React from \"react\";\nimport \"./Spinner.scss\";\n\nconst Spinner = () => {\n  return <div className=\"spinner\" />;\n};\n\nexport default Spinner;\n","export const Check = `<svg data-icon=\"user-check\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\"><path fill=\"currentColor\" d=\"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z\"></path></svg>`;\nexport const Logo = `<svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 400\"><path fill=\"currentColor\" d=\"M518.22,156.7A31.52,31.52,0,0,0,507.3,155,20.51,20.51,0,0,0,497,157.52q-4.53,2.55-7.64,9.61Q484.62,177.5,479,189t-11.58,23.33q-6.75-12.81-13.23-26.54T441.73,159.9a23.08,23.08,0,0,0-5.91-3.12A28.93,28.93,0,0,0,425,155a25.61,25.61,0,0,0-5.91.66,14.34,14.34,0,0,0-5,2.22,11.41,11.41,0,0,0-3.61,4.35,16.81,16.81,0,0,0-1.56,6.91l-5.59,98.59h27.77l3.62-67.21q2.63,5.26,5.75,11.59t6.08,12.73q3,6.41,5.67,12.33t4.51,10.35h20.38q2-4.44,4.52-10.11T487,225.47q2.88-6.24,6-12.65l6.08-12.49,3.78,67.37h27.61l-6.25-108.29A28.24,28.24,0,0,0,518.22,156.7Z\"/><path fill=\"currentColor\" d=\"M571.09,183.9q-6.26,0-10,2.62t-3.78,9V267.7h26.46V186.36c-.66-.22-2.19-.68-4.6-1.4A28.47,28.47,0,0,0,571.09,183.9Z\"/><path fill=\"currentColor\" d=\"M570.43,146.59A14,14,0,0,0,560,150.87a14.44,14.44,0,0,0-4.19,10.51A14.32,14.32,0,0,0,570.43,176a14.44,14.44,0,0,0,10.51-4.19,14,14,0,0,0,4.28-10.44,14.62,14.62,0,0,0-14.79-14.79Z\"/><path  fill=\"currentColor\" d=\"M623.85,146.59q-6.26,0-10,2.63t-3.78,9V267.7H636.5V149.06c-.66-.22-2.19-.68-4.6-1.4A28.41,28.41,0,0,0,623.85,146.59Z\"/><path fill=\"currentColor\" d=\"M743,186a32.43,32.43,0,0,0-4.6-1.48,24.9,24.9,0,0,0-5.92-.65,19.39,19.39,0,0,0-6.08.82,11.7,11.7,0,0,0-4.19,2.38,15,15,0,0,0-3,3.7,33.22,33.22,0,0,0-2.22,4.6q-1.82,4.44-4.36,10.76t-5.09,12.65q-2.55,6.33-4.68,11.51t-3.13,7.31c-.65-1.42-1.75-3.92-3.28-7.48s-3.26-7.67-5.18-12.32-3.92-9.72-6-15.2-4-10.9-5.91-16.27a26.73,26.73,0,0,0-3.78-1.4,28.38,28.38,0,0,0-8.55-1.06q-6.57,0-9.86,3.2a10.49,10.49,0,0,0-3.28,7.8,21.09,21.09,0,0,0,1.56,7.4q1.56,4.11,2.87,7.39.66,1.65,3.29,7.48t6.57,14.13q3.94,8.31,8.79,17.83t10,18.57h24.48q1.82-3.45,5.09-9.78t7.07-14.21q3.78-7.89,7.72-16.35t7.32-16.19q3.36-7.72,5.83-13.72a62.35,62.35,0,0,0,3.12-8.95c-.22-.11-.71-.41-1.48-.91A20.87,20.87,0,0,0,743,186Z\"/><path fill=\"currentColor\" d=\"M835.07,183.9q-6.26,0-10,2.62t-3.78,9v33q0,17.1-15.44,17.09t-15.45-17.09V186.36c-.66-.22-2.19-.68-4.6-1.4a28.43,28.43,0,0,0-8-1.06q-6.26,0-10,2.62t-3.78,9v38a37.23,37.23,0,0,0,3.21,16,31.49,31.49,0,0,0,8.79,11.34,38,38,0,0,0,13.31,6.82,61,61,0,0,0,33.19,0,38,38,0,0,0,13.31-6.82,31.49,31.49,0,0,0,8.79-11.34,37.23,37.23,0,0,0,3.21-16V186.36c-.66-.22-2.19-.68-4.6-1.4A28.47,28.47,0,0,0,835.07,183.9Z\"/><path fill=\"currentColor\" d=\"M947.76,229.58a21.51,21.51,0,0,0-6.41-7.56,30.15,30.15,0,0,0-9.2-4.52,75.35,75.35,0,0,0-10.77-2.38l-15-2.14a33.78,33.78,0,0,1-7.89-2,4,4,0,0,1-2.63-3.95,5.13,5.13,0,0,1,2.88-4.51q2.88-1.73,10.27-1.73a62.94,62.94,0,0,1,11.75,1,68.58,68.58,0,0,1,8.87,2.21,32.06,32.06,0,0,1,5.92,2.55,17.91,17.91,0,0,1,2.71,1.81q.33-.16,1.56-1a16,16,0,0,0,5.09-5.83,9.9,9.9,0,0,0,1.07-4.68,9.12,9.12,0,0,0-1.89-5.84,15.51,15.51,0,0,0-5-4,45.28,45.28,0,0,0-12.9-4.11,104.09,104.09,0,0,0-17.83-1.32,61.53,61.53,0,0,0-17.58,2.22,35.26,35.26,0,0,0-12.16,6.08,23.5,23.5,0,0,0-7,9,28.28,28.28,0,0,0-2.22,11.26,24.49,24.49,0,0,0,2.63,12,22.13,22.13,0,0,0,7.15,7.81,34,34,0,0,0,10.43,4.6A96.61,96.61,0,0,0,902,237l8.55,1a37,37,0,0,1,9,2,4.51,4.51,0,0,1,2.88,4.52q0,3.12-3.45,4.35t-10.19,1.24a66.7,66.7,0,0,1-11.26-.91,83.38,83.38,0,0,1-9.53-2.13,54.16,54.16,0,0,1-7.23-2.63,25.19,25.19,0,0,1-4.35-2.39L867,259.15a47.15,47.15,0,0,0,4.69,2.88,47.69,47.69,0,0,0,8.79,3.62A98.22,98.22,0,0,0,910.54,270q18.57,0,29.08-7.72t10.52-21.53A24.16,24.16,0,0,0,947.76,229.58Z\"/><path fill=\"currentColor\" d=\"M262.05,135.73c-39.78-39-104.28-39.06-144.07,0L52.88,199.6a9.55,9.55,0,0,0,0,13.67l65.06,63.91c39.78,39.07,104.3,39.09,144.11,0h0a98.75,98.75,0,0,0,0-141.48ZM246.62,258.44h0a75.84,75.84,0,0,1-105.86,0l-47.8-47a7,7,0,0,1,0-10l47.82-46.93a75.86,75.86,0,0,1,105.85,0h0A72.54,72.54,0,0,1,246.62,258.44Z\"/><path fill=\"currentColor\" d=\"M318.64,171a2.41,2.41,0,0,0-4.07,2.21,150.35,150.35,0,0,1,0,66.51,2.41,2.41,0,0,0,4.07,2.21l28.64-28.63a9.66,9.66,0,0,0,0-13.66Z\"/><circle fill=\"currentColor\" cx=\"194.04\" cy=\"206.49\" r=\"50.14\"/></svg>`;\n","var toWav = require(\"audiobuffer-to-wav\");\n\nexport function DataURIToBlob(dataURI) {\n  // convert base64/URLEncoded data component to raw binary data held in a string\n  var byteString;\n  if (dataURI.split(\",\")[0].indexOf(\"base64\") >= 0) {\n    byteString = atob(dataURI.split(\",\")[1]);\n  } else {\n    byteString = unescape(dataURI.split(\",\")[1]);\n  }\n  // separate out the mime component\n  var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n\n  // write the bytes of the string to a typed array\n  var ia = new Uint8Array(byteString.length);\n  for (var i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n  return new Blob([ia], { type: mimeString });\n}\n\nexport const handleRes = (string) => {\n  if (!string) {\n    return [];\n  }\n  if (typeof string === \"string\") {\n    string = string.slice(1, string.length - 1);\n    return string.split(\", \").map((a) => a.slice(1, a.length - 1));\n  }\n  if (typeof string === \"object\") {\n    return string;\n  }\n};\n\nconst numberOfChannels = 1;\nconst sampleRate = 44100;\nconst duration = 8;\nexport const addAudioVideo = (blob, form) => {\n  // const isFile = typeof blob.name == \"string\";\n  const isWebm = blob.type.indexOf(\"webm\") > -1;\n  // console.info(blob, isFile);\n  if (isWebm) {\n    var offlineAudioContext = new OfflineAudioContext(\n      numberOfChannels,\n      sampleRate * duration,\n      sampleRate\n    );\n    var soundSource = offlineAudioContext.createBufferSource();\n    var audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    blob.arrayBuffer().then((audioBuffer) => {\n      audioContext\n        .decodeAudioData(audioBuffer)\n        .then(function (decodedAudioData) {\n          const myBuffer = decodedAudioData;\n          soundSource.buffer = myBuffer;\n          soundSource.connect(offlineAudioContext.destination);\n          soundSource.start();\n          offlineAudioContext.startRendering().then(function (renderedBuffer) {\n            var wav = toWav(renderedBuffer);\n            // download(wav, 'audio.wav',\"audio/wav\")\n            var _blob = new window.Blob([new DataView(wav)], {\n              type: \"audio/wav\",\n            });\n            _blob.name = \"audio.wav\";\n            form.append(\"audio\", _blob);\n          });\n        });\n    });\n  } else {\n    form.append(\"video\", blob);\n  }\n  return form;\n};\n\nexport const addPhotoAndQuery = (shouldExecute, form, query, handleRes) => {\n  const video = document.querySelector(\"video\");\n  video.onplay = function () {\n    setTimeout(() => {\n      if (!shouldExecute) {\n        return;\n      }\n      shouldExecute = false;\n      const canvas = document.createElement(\"canvas\");\n      const photo = document.createElement(\"img\");\n      document.body.appendChild(photo);\n      var context = canvas.getContext(\"2d\");\n      canvas.width = 300;\n      canvas.height = 300;\n      context.drawImage(video, 0, 0, 300, 300);\n      var Photo = canvas.toDataURL(\"image/png\");\n      const img = DataURIToBlob(Photo);\n      form.append(\"img\", img);\n      query(form).then((data) => {\n        handleRes(data);\n      });\n    }, 1000);\n    return shouldExecute;\n  };\n};\n\nexport const getButtonText = text=> `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z\"/></svg>\t${text}`;","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { queryContext } from \"./contexts/QueryContext\";\nimport { rootContext } from \"./contexts/RootContext\";\nimport VideoRecorder from \"react-video-recorder\";\nimport Spinner from \"./components/Spinner\";\nimport \"./Identity.scss\";\nimport { Logo } from \"./Icons\";\nimport Button from \"@material-ui/core/Button\";\nimport TouchAppIcon from \"@material-ui/icons/TouchApp\";\nimport {\n  countdownTime,\n  Limit_Record,\n  route,\n  Text_Read,\n  Text,\n  color,\n} from \"./Consts\";\nimport {\n  handleRes,\n  addAudioVideo,\n  addPhotoAndQuery,\n  getButtonText,\n} from \"./Helper\";\nconst button_text = getButtonText(`Click To Identify`);\nconst text_confirm = `Back to Identity Page`;\n\nconst Identity = () => {\n  const classes = makeStyles({\n    buttonRoot: {\n      margin: \"32px 0 0 0\",\n      color: color.text,\n    },\n    contained: {\n      background: color.main,\n    },\n  })({});\n  const { search } = useContext(queryContext);\n  const { setSnackbar } = useContext(rootContext);\n  const [loading, setLoading] = useState(false);\n  const [cameraOn, setCameraOn] = useState(false);\n  const [recording, setRecording] = useState(false);\n  const [valid_res, setValidRes] = useState();\n  const Link = useRef(null);\n  const Form = useRef(new FormData());\n  const isFirstRun = useRef(true);\n  const showLogo = !loading && !cameraOn && !recording;\n\n  useEffect(() => {\n    setTimeout(() => {\n      let button = document.querySelector(\".button__Button-hkteey-0\");\n      let container =\n        document.querySelector(\".hCBOlN\") || document.querySelector(\".hSoFMV\");\n      if (button) {\n        button.innerHTML = button_text;\n        const div = document.createElement(\"div\");\n        const link = document.createElement(\"a\");\n        link.href = route.register;\n        link.className = \"a_link\";\n        link.innerHTML = ` New User? `;\n        link.style.margin = \"0 0 0 5px\";\n        div.appendChild(link);\n        Link.current = div;\n        container.appendChild(div);\n      }\n    }, 0);\n  }, []);\n  const onTurnOnCamera = () => {\n    setCameraOn(true);\n    Link.current && Link.current.classList.add(\"hidden\");\n    const camera = document.querySelector(\".heQTiL\");\n    const video = document.querySelector(\".bVxZhR\");\n    camera && camera.classList.add(\"full-height\");\n    video && video.classList.add(\"full-height\");\n  };\n  const resolveRes = (data) => {\n    const arr = handleRes(data);\n    if (Array.isArray(arr)) {\n      if (arr[0] === \"true\") {\n        setValidRes({ src: arr[1], name: arr[2] });\n      } else {\n        setSnackbar({\n          open: true,\n          message: Text.unAuthorized,\n          onClose: () => window.location.reload(),\n        });\n      }\n    } else {\n      setSnackbar({\n        open: true,\n        message: (arr && arr.message) || Text.fail_to_identify,\n      });\n      setTimeout(() => {\n        window.location.reload();\n      }, 3000);\n    }\n  };\n  // Attention: mobile phone's won't don this step, they have to use the video recorded after complete;\n  const onStartRecording = () => {\n    setCameraOn(false);\n    setRecording(true);\n  };\n  const onRecordingComplete = (videoBlob) => {\n    Form.current = addAudioVideo(videoBlob, Form.current);\n    isFirstRun.current = addPhotoAndQuery(\n      isFirstRun.current,\n      Form.current,\n      search,\n      resolveRes\n    );\n    setRecording(false);\n    setLoading(true);\n    const link = document.querySelector(\".a_link\");\n    link && link.classList.add(\"hidden\");\n    const video = document.querySelector(\"video\");\n    video && video.classList.add(\"hidden\");\n    const button = document.querySelector(\"button\");\n    button && button.classList.add(\"hidden\");\n  };\n  return (\n    <div className=\"App\">\n      {showLogo && (\n        <>\n          <div className=\"margin-top\"></div>\n          <div\n            className=\"disconnect-view\"\n            dangerouslySetInnerHTML={{ __html: Logo }}\n          ></div>\n          <h3>ID Systems powered by Milvus</h3>\n          <p className=\"label\">{Text.note_to_record}</p>\n          <p className=\"label\">\n            {Text.for_example} &nbsp;&nbsp;<span>{Text_Read}</span>\n          </p>\n        </>\n      )}\n      <VideoRecorder\n        onTurnOnCamera={onTurnOnCamera}\n        onStartRecording={onStartRecording}\n        onRecordingComplete={onRecordingComplete}\n        showReplayControls={false}\n        countdownTime={countdownTime}\n        timeLimit={Limit_Record}\n        isFlipped={false}\n        replayVideoAutoplayAndLoopOff={true}\n        renderDisconnectedView={() => <></>}\n        renderLoadingView={() => <Spinner />}\n      />\n      {loading && (\n        <div className=\"mask\">\n          {valid_res ? (\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                flexDirection: \"column\",\n              }}\n            >\n              <img src={valid_res.src} alter={valid_res.name} alt=\"\" />\n              <h3 style={{ color: \"#ffffff\" }}>\n                Welcome &nbsp;&nbsp;\n                <span style={{ color: \"#00ff00\", fontSize: \"2rem\" }}>\n                  {valid_res.name}\n                </span>\n                &nbsp;~\n              </h3>\n              <Button\n                classes={{\n                  root: classes.buttonRoot,\n                  contained: classes.contained,\n                }}\n                variant=\"contained\"\n                size=\"large\"\n                onClick={() => {\n                  window.location.pathname = \"/\";\n                }}\n              >\n                <TouchAppIcon />\n                {text_confirm}\n              </Button>\n            </div>\n          ) : (\n            <Spinner />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Identity;\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport { queryContext } from \"./contexts/QueryContext\";\nimport { rootContext } from \"./contexts/RootContext\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport TouchAppIcon from \"@material-ui/icons/TouchApp\";\nimport VideoRecorder from \"react-video-recorder\";\nimport Spinner from \"./components/Spinner\";\nimport \"./Identity.scss\";\nimport { Check, Logo } from \"./Icons\";\nimport { countdownTime, Limit_Record, color, Text_Read } from \"./Consts\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { addAudioVideo, addPhotoAndQuery, getButtonText } from \"./Helper\";\nimport { route, Text } from \"./Consts\";\n\nconst placeholder = `Please Enter your name`;\nconst button_text = getButtonText(`Click to Record`);\nconst text_confirm = `Back to Identity Page`;\nconst text_link = `Registed? `;\nconst Register = () => {\n  const matches = useMediaQuery(\"(min-width:1000px)\");\n  const classes = makeStyles({\n    root: {\n      width: matches ? \"30%\" : \"70%\",\n      marginBottom: \"10px\",\n      display: \"block\",\n      \"& input:valid + fieldset\": {\n        borderColor: color.hint,\n        borderWidth: 2,\n      },\n      \"& input:valid:focus + fieldset\": {\n        borderLeftWidth: 6,\n        padding: \"4px !important\",\n        borderColor: color.main,\n      },\n      \"& .MuiOutlinedInput-root\": {\n        \"&:hover fieldset\": {\n          borderColor: color.main,\n        },\n      },\n    },\n    input: {\n      color: color.text,\n      width: `100%`,\n    },\n    buttonRoot: {\n      margin: \"32px 0 0 0\",\n      color: color.text,\n    },\n    contained: {\n      background: color.main,\n    },\n  })({});\n  const { insert } = useContext(queryContext);\n  const { setSnackbar } = useContext(rootContext);\n  const [name, setName] = useState(\"\");\n  const [cameraOn, setCameraOn] = useState(false);\n  const [recording, setRecording] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [valid_res, setValidRes] = useState();\n  const Link = useRef(null);\n  const buttonRef = useRef(null);\n  const isFirstRun = useRef(true);\n  const Form = useRef(new FormData());\n  const showLogo = !loading && !cameraOn && !recording;\n  useEffect(() => {\n    setTimeout(() => {\n      let button = document.querySelector(\".button__Button-hkteey-0\");\n      let container =\n        document.querySelector(\".hCBOlN\") || document.querySelector(\".hSoFMV\");\n      if (button) {\n        buttonRef.current = button;\n        button.disabled = true;\n        button.innerHTML = button_text;\n        button.classList.add(\"not-allowed\");\n        const div = document.createElement(\"div\");\n        const link = document.createElement(\"a\");\n        link.href = route.identity;\n        link.className = \"a_link\";\n        link.innerHTML = text_link;\n        link.style.margin = \"0 0 0 5px\";\n        div.appendChild(link);\n        Link.current = div;\n        container.appendChild(div);\n      }\n    }, 0);\n  }, []);\n  const resolveRes = (data) => {\n    if (data && data.status === \"success\") {\n      setValidRes(true);\n    } else {\n      setSnackbar({\n        open: true,\n        message: (data && data.message) || Text.fail_to_insert,\n        onClose: () => window.location.reload(),\n      });\n    }\n  };\n  const onNameChange = (e) => {\n    const value = e.target.value;\n    if (buttonRef.current) {\n      buttonRef.current.disabled = !value;\n      value\n        ? buttonRef.current.classList.remove(\"not-allowed\")\n        : buttonRef.current.classList.add(\"not-allowed\");\n    }\n    setName(value);\n  };\n  const onTurnOnCamera = () => {\n    setCameraOn(true);\n    Link.current && Link.current.classList.add(\"hidden\");\n    const camera = document.querySelector(\".heQTiL\");\n    const video = document.querySelector(\".bVxZhR\");\n    camera && camera.classList.add(\"full-height\");\n    video && video.classList.add(\"full-height\");\n  };\n  const onStartRecording = () => {\n    setCameraOn(false);\n    setRecording(true);\n  };\n  const onRecordingComplete = (videoBlob) => {\n    setRecording(false);\n    setLoading(true);\n    Form.current.append(\"Name\", name);\n    Form.current = addAudioVideo(videoBlob, Form.current);\n    isFirstRun.current = addPhotoAndQuery(\n      isFirstRun.current,\n      Form.current,\n      insert,\n      resolveRes\n    );\n    const video = document.querySelector(\".heQTiL\");\n    video && video.classList.add(\"hidden\");\n    const video_build = document.querySelector(\".bVxZhR\");\n    video_build && video_build.classList.add(\"hidden\");\n  };\n  return (\n    <div className=\"App\">\n      {showLogo && (\n        <>\n          <div className=\"margin-top\"></div>\n          <div\n            className=\"disconnect-view\"\n            dangerouslySetInnerHTML={{ __html: Logo }}\n          ></div>\n          <h3>ID Systems powered by Milvus</h3>\n          <TextField\n            variant=\"outlined\"\n            placeholder={placeholder}\n            value={name}\n            onChange={onNameChange}\n            classes={{\n              root: classes.root,\n            }}\n            InputProps={{\n              className: classes.input,\n            }}\n          />\n          <p className=\"label\">{Text.note_to_record}</p>\n          <p className=\"label\">\n            {Text.for_example} &nbsp;&nbsp;<span>{Text_Read}</span>\n          </p>\n        </>\n      )}\n      <VideoRecorder\n        onTurnOnCamera={onTurnOnCamera}\n        onStartRecording={onStartRecording}\n        onRecordingComplete={onRecordingComplete}\n        showReplayControls={false}\n        countdownTime={countdownTime}\n        timeLimit={Limit_Record}\n        isFlipped={false}\n        replayVideoAutoplayAndLoopOff={true}\n        renderDisconnectedView={() => <></>}\n        renderLoadingView={() => <Spinner />}\n      />\n      {loading && (\n        <div className=\"mask\">\n          {valid_res ? (\n            <>\n              <div\n                className=\"result\"\n                dangerouslySetInnerHTML={{ __html: Check }}\n              ></div>\n              <Button\n                classes={{\n                  root: classes.buttonRoot,\n                  contained: classes.contained,\n                }}\n                variant=\"contained\"\n                size=\"large\"\n                onClick={() => {\n                  window.location.pathname = \"/\";\n                }}\n              >\n                <TouchAppIcon />\n                {text_confirm}\n              </Button>\n            </>\n          ) : (\n            <Spinner />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Register;\n","import React from \"react\";\nimport { Switch, Route, BrowserRouter as Router } from \"react-router-dom\";\nimport QueryProvider from \"./contexts/QueryContext\";\nimport RootProvider from \"./contexts/RootContext\";\nimport Identity from \"./Identity\";\nimport Register from \"./Register\";\nconst App = () => {\n  return (\n    <RootProvider>\n      <QueryProvider>\n        <Router>\n          <Switch>\n            <Route path=\"/register\" component={Register} />\n            <Route component={Identity} />\n          </Switch>\n        </Router>\n      </QueryProvider>\n    </RootProvider>\n  );\n};\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}