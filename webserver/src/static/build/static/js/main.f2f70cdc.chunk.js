(this.webpackJsonptestapp=this.webpackJsonptestapp||[]).push([[0],{121:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),l=(n(85),n(70)),i=n(26),s=n(37),u=n.n(s),d=n(45),m=n(16),p=n(168),f=n(166),h=r.a.createContext({}),v=h.Provider;function w(e){return r.a.createElement(f.a,Object.assign({elevation:6,variant:"filled"},e))}var b=function(e){var t=e.children,n=Object(a.useState)({}),o=Object(m.a)(n,2),c=o[0],l=o[1],i=Object(a.useState)({open:!1,message:"",onClose:null}),s=Object(m.a)(i,2),u=s[0],d=s[1];return r.a.createElement(v,{value:{dialog:c,setDialog:l,snakebar:u,setSnackbar:d}},t,r.a.createElement(p.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:u.open,autoHideDuration:6e4,onClose:u.onClose},r.a.createElement(w,{severity:"error",onClose:u.onClose},u.message||"")))},g=n(66),y=n.n(g),E="https://192.168.1.85:5006";window._env_&&window._env_.API_URL&&(E=window._env_.API_URL);var C={insert:"".concat(E,"/api/v1/insert"),search:"".concat(E,"/api/v1/search")},O=5e3;window._env_&&window._env_.Limit_Record_Time&&(O=window._env_.Limit_Record_Time);var _=O,S=1e3;window._env_&&window._env_.Limit_Count_Down&&(S=window._env_.Limit_Count_Down);var j=S,L="Milvus is the Best\uff01";window._env_&&window._env_.Text_Read&&(L=window._env_.Text_Read);var q=L,x="register",k="/",A="#4fc4f9",R="#fff",M="#ccc",T="Insert fail. Please aim at the camera and keep no noise around.",N="After starting to record, please point the camera and read whatever you like for about 5 seconds. ",V="E.g.",B="Unauthorized! Please make sure you have registed, be sure to aim at the camera and follow the text prompts for voice verification.",I="Something is wrong with server, please try later",D=y.a.create(),Z=Object(a.createContext)({}),F=Z.Provider,z=function(e){var t=e.children,n=Object(a.useContext)(h).setSnackbar,o=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post(C.search,t).catch((function(e){n({open:!0,message:"receive bad request"})}));case 2:return a=e.sent,e.abrupt("return",a&&a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post(C.insert,t);case 2:return n=e.sent,e.abrupt("return",n&&n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(F,{value:{search:o,insert:c}},t)},H=n(165),P=n(41),U=n.n(P),W=(n(121),function(){return r.a.createElement("div",{className:"spinner"})}),Q=(n(62),'<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 400"><path fill="currentColor" d="M518.22,156.7A31.52,31.52,0,0,0,507.3,155,20.51,20.51,0,0,0,497,157.52q-4.53,2.55-7.64,9.61Q484.62,177.5,479,189t-11.58,23.33q-6.75-12.81-13.23-26.54T441.73,159.9a23.08,23.08,0,0,0-5.91-3.12A28.93,28.93,0,0,0,425,155a25.61,25.61,0,0,0-5.91.66,14.34,14.34,0,0,0-5,2.22,11.41,11.41,0,0,0-3.61,4.35,16.81,16.81,0,0,0-1.56,6.91l-5.59,98.59h27.77l3.62-67.21q2.63,5.26,5.75,11.59t6.08,12.73q3,6.41,5.67,12.33t4.51,10.35h20.38q2-4.44,4.52-10.11T487,225.47q2.88-6.24,6-12.65l6.08-12.49,3.78,67.37h27.61l-6.25-108.29A28.24,28.24,0,0,0,518.22,156.7Z"/><path fill="currentColor" d="M571.09,183.9q-6.26,0-10,2.62t-3.78,9V267.7h26.46V186.36c-.66-.22-2.19-.68-4.6-1.4A28.47,28.47,0,0,0,571.09,183.9Z"/><path fill="currentColor" d="M570.43,146.59A14,14,0,0,0,560,150.87a14.44,14.44,0,0,0-4.19,10.51A14.32,14.32,0,0,0,570.43,176a14.44,14.44,0,0,0,10.51-4.19,14,14,0,0,0,4.28-10.44,14.62,14.62,0,0,0-14.79-14.79Z"/><path  fill="currentColor" d="M623.85,146.59q-6.26,0-10,2.63t-3.78,9V267.7H636.5V149.06c-.66-.22-2.19-.68-4.6-1.4A28.41,28.41,0,0,0,623.85,146.59Z"/><path fill="currentColor" d="M743,186a32.43,32.43,0,0,0-4.6-1.48,24.9,24.9,0,0,0-5.92-.65,19.39,19.39,0,0,0-6.08.82,11.7,11.7,0,0,0-4.19,2.38,15,15,0,0,0-3,3.7,33.22,33.22,0,0,0-2.22,4.6q-1.82,4.44-4.36,10.76t-5.09,12.65q-2.55,6.33-4.68,11.51t-3.13,7.31c-.65-1.42-1.75-3.92-3.28-7.48s-3.26-7.67-5.18-12.32-3.92-9.72-6-15.2-4-10.9-5.91-16.27a26.73,26.73,0,0,0-3.78-1.4,28.38,28.38,0,0,0-8.55-1.06q-6.57,0-9.86,3.2a10.49,10.49,0,0,0-3.28,7.8,21.09,21.09,0,0,0,1.56,7.4q1.56,4.11,2.87,7.39.66,1.65,3.29,7.48t6.57,14.13q3.94,8.31,8.79,17.83t10,18.57h24.48q1.82-3.45,5.09-9.78t7.07-14.21q3.78-7.89,7.72-16.35t7.32-16.19q3.36-7.72,5.83-13.72a62.35,62.35,0,0,0,3.12-8.95c-.22-.11-.71-.41-1.48-.91A20.87,20.87,0,0,0,743,186Z"/><path fill="currentColor" d="M835.07,183.9q-6.26,0-10,2.62t-3.78,9v33q0,17.1-15.44,17.09t-15.45-17.09V186.36c-.66-.22-2.19-.68-4.6-1.4a28.43,28.43,0,0,0-8-1.06q-6.26,0-10,2.62t-3.78,9v38a37.23,37.23,0,0,0,3.21,16,31.49,31.49,0,0,0,8.79,11.34,38,38,0,0,0,13.31,6.82,61,61,0,0,0,33.19,0,38,38,0,0,0,13.31-6.82,31.49,31.49,0,0,0,8.79-11.34,37.23,37.23,0,0,0,3.21-16V186.36c-.66-.22-2.19-.68-4.6-1.4A28.47,28.47,0,0,0,835.07,183.9Z"/><path fill="currentColor" d="M947.76,229.58a21.51,21.51,0,0,0-6.41-7.56,30.15,30.15,0,0,0-9.2-4.52,75.35,75.35,0,0,0-10.77-2.38l-15-2.14a33.78,33.78,0,0,1-7.89-2,4,4,0,0,1-2.63-3.95,5.13,5.13,0,0,1,2.88-4.51q2.88-1.73,10.27-1.73a62.94,62.94,0,0,1,11.75,1,68.58,68.58,0,0,1,8.87,2.21,32.06,32.06,0,0,1,5.92,2.55,17.91,17.91,0,0,1,2.71,1.81q.33-.16,1.56-1a16,16,0,0,0,5.09-5.83,9.9,9.9,0,0,0,1.07-4.68,9.12,9.12,0,0,0-1.89-5.84,15.51,15.51,0,0,0-5-4,45.28,45.28,0,0,0-12.9-4.11,104.09,104.09,0,0,0-17.83-1.32,61.53,61.53,0,0,0-17.58,2.22,35.26,35.26,0,0,0-12.16,6.08,23.5,23.5,0,0,0-7,9,28.28,28.28,0,0,0-2.22,11.26,24.49,24.49,0,0,0,2.63,12,22.13,22.13,0,0,0,7.15,7.81,34,34,0,0,0,10.43,4.6A96.61,96.61,0,0,0,902,237l8.55,1a37,37,0,0,1,9,2,4.51,4.51,0,0,1,2.88,4.52q0,3.12-3.45,4.35t-10.19,1.24a66.7,66.7,0,0,1-11.26-.91,83.38,83.38,0,0,1-9.53-2.13,54.16,54.16,0,0,1-7.23-2.63,25.19,25.19,0,0,1-4.35-2.39L867,259.15a47.15,47.15,0,0,0,4.69,2.88,47.69,47.69,0,0,0,8.79,3.62A98.22,98.22,0,0,0,910.54,270q18.57,0,29.08-7.72t10.52-21.53A24.16,24.16,0,0,0,947.76,229.58Z"/><path fill="currentColor" d="M262.05,135.73c-39.78-39-104.28-39.06-144.07,0L52.88,199.6a9.55,9.55,0,0,0,0,13.67l65.06,63.91c39.78,39.07,104.3,39.09,144.11,0h0a98.75,98.75,0,0,0,0-141.48ZM246.62,258.44h0a75.84,75.84,0,0,1-105.86,0l-47.8-47a7,7,0,0,1,0-10l47.82-46.93a75.86,75.86,0,0,1,105.85,0h0A72.54,72.54,0,0,1,246.62,258.44Z"/><path fill="currentColor" d="M318.64,171a2.41,2.41,0,0,0-4.07,2.21,150.35,150.35,0,0,1,0,66.51,2.41,2.41,0,0,0,4.07,2.21l28.64-28.63a9.66,9.66,0,0,0,0-13.66Z"/><circle fill="currentColor" cx="194.04" cy="206.49" r="50.14"/></svg>'),J=n(162),$=n(42),G=n.n($),K=n(122);var X=function(e,t){if(e.type.indexOf("webm")>-1){var n=new OfflineAudioContext(1,352800,44100),a=n.createBufferSource(),r=new(window.AudioContext||window.webkitAudioContext);e.arrayBuffer().then((function(e){r.decodeAudioData(e).then((function(e){var r=e;a.buffer=r,a.connect(n.destination),a.start(),n.startRendering().then((function(e){var n=K(e),a=new window.Blob([new DataView(n)],{type:"audio/wav"});a.name="audio.wav",t.append("audio",a)}))}))}))}else t.append("video",e);return t},Y=function(e,t,n,a){var r=document.querySelector("video");r.onplay=function(){return setTimeout((function(){if(e){e=!1;var o=document.createElement("canvas"),c=document.createElement("img");document.body.appendChild(c);var l=o.getContext("2d");o.width=300,o.height=300,l.drawImage(r,0,0,300,300);var i=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(t.length),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return new Blob([a],{type:n})}(o.toDataURL("image/png"));t.append("img",i),n(t).then((function(e){a(e)}))}}),1e3),e}},ee=function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z"/></svg>\t'.concat(e)},te=ee("Click To Identify"),ne=function(){var e=Object(H.a)({buttonRoot:{margin:"32px 0 0 0",color:R},contained:{background:A}})({}),t=Object(a.useContext)(Z).search,n=Object(a.useContext)(h).setSnackbar,o=Object(a.useState)(!1),c=Object(m.a)(o,2),l=c[0],i=c[1],s=Object(a.useState)(!1),u=Object(m.a)(s,2),d=u[0],p=u[1],f=Object(a.useState)(!1),v=Object(m.a)(f,2),w=v[0],b=v[1],g=Object(a.useState)(),y=Object(m.a)(g,2),E=y[0],C=y[1],O=Object(a.useRef)(null),S=Object(a.useRef)(new FormData),L=Object(a.useRef)(!0),k=!l&&!d&&!w;Object(a.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".button__Button-hkteey-0"),t=document.querySelector(".hCBOlN")||document.querySelector(".hSoFMV");if(e){e.innerHTML=te;var n=document.createElement("div"),a=document.createElement("a");a.href=x,a.className="a_link",a.innerHTML=" New User? ",a.style.margin="0 0 0 5px",n.appendChild(a),O.current=n,t.appendChild(n)}}),0)}),[]);var M=function(e){var t,a=(t=e)?"string"===typeof t?(t=t.slice(1,t.length-1)).split(", ").map((function(e){return e.slice(1,e.length-1)})):"object"===typeof t?t:void 0:[];Array.isArray(a)?"true"===a[0]?C({src:a[1],name:a[2]}):n({open:!0,message:B,onClose:function(){return window.location.reload()}}):(n({open:!0,message:a&&a.message||I}),setTimeout((function(){window.location.reload()}),3e3))};return r.a.createElement("div",{className:"App"},k&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"margin-top"}),r.a.createElement("div",{className:"disconnect-view",dangerouslySetInnerHTML:{__html:Q}}),r.a.createElement("h3",null,"ID Systems powered by Milvus"),r.a.createElement("p",{className:"label"},N),r.a.createElement("p",{className:"label"},V," \xa0\xa0",r.a.createElement("span",null,q))),r.a.createElement(U.a,{onTurnOnCamera:function(){p(!0),O.current&&O.current.classList.add("hidden");var e=document.querySelector(".heQTiL"),t=document.querySelector(".bVxZhR");e&&e.classList.add("full-height"),t&&t.classList.add("full-height")},onStartRecording:function(){p(!1),b(!0)},onRecordingComplete:function(e){S.current=X(e,S.current),L.current=Y(L.current,S.current,t,M),b(!1),i(!0);var n=document.querySelector(".a_link");n&&n.classList.add("hidden");var a=document.querySelector("video");a&&a.classList.add("hidden");var r=document.querySelector("button");r&&r.classList.add("hidden")},showReplayControls:!1,countdownTime:j,timeLimit:_,isFlipped:!1,replayVideoAutoplayAndLoopOff:!0,renderDisconnectedView:function(){return r.a.createElement(r.a.Fragment,null)},renderLoadingView:function(){return r.a.createElement(W,null)}}),l&&r.a.createElement("div",{className:"mask"},E?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("img",{src:E.src,alter:E.name,alt:""}),r.a.createElement("h3",{style:{color:"#ffffff"}},"Welcome \xa0\xa0",r.a.createElement("span",{style:{color:"#00ff00",fontSize:"2rem"}},E.name),"\xa0~"),r.a.createElement(J.a,{classes:{root:e.buttonRoot,contained:e.contained},variant:"contained",size:"large",onClick:function(){window.location.pathname="/"}},r.a.createElement(G.a,null),"Back to Identity Page")):r.a.createElement(W,null)))},ae=n(163),re=n(164),oe=ee("Click to Record"),ce=function(){var e=Object(ae.a)("(min-width:1000px)"),t=Object(H.a)({root:{width:e?"30%":"70%",marginBottom:"10px",display:"block","& input:valid + fieldset":{borderColor:M,borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px !important",borderColor:A},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:A}}},input:{color:R,width:"100%"},buttonRoot:{margin:"32px 0 0 0",color:R},contained:{background:A}})({}),n=Object(a.useContext)(Z).insert,o=Object(a.useContext)(h).setSnackbar,c=Object(a.useState)(""),l=Object(m.a)(c,2),i=l[0],s=l[1],u=Object(a.useState)(!1),d=Object(m.a)(u,2),p=d[0],f=d[1],v=Object(a.useState)(!1),w=Object(m.a)(v,2),b=w[0],g=w[1],y=Object(a.useState)(!1),E=Object(m.a)(y,2),C=E[0],O=E[1],S=Object(a.useState)(),L=Object(m.a)(S,2),x=L[0],B=L[1],I=Object(a.useRef)(null),D=Object(a.useRef)(null),F=Object(a.useRef)(!0),z=Object(a.useRef)(new FormData),P=!C&&!p&&!b;Object(a.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".button__Button-hkteey-0"),t=document.querySelector(".hCBOlN")||document.querySelector(".hSoFMV");if(e){D.current=e,e.disabled=!0,e.innerHTML=oe,e.classList.add("not-allowed");var n=document.createElement("div"),a=document.createElement("a");a.href=k,a.className="a_link",a.innerHTML="Registed? ",a.style.margin="0 0 0 5px",n.appendChild(a),I.current=n,t.appendChild(n)}}),0)}),[]);var $=function(e){e&&"success"===e.status?B(!0):o({open:!0,message:e&&e.message||T,onClose:function(){return window.location.reload()}})};return r.a.createElement("div",{className:"App"},P&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"margin-top"}),r.a.createElement("div",{className:"disconnect-view",dangerouslySetInnerHTML:{__html:Q}}),r.a.createElement("h3",null,"ID Systems powered by Milvus"),r.a.createElement(re.a,{variant:"outlined",placeholder:"Please Enter your name",value:i,onChange:function(e){var t=e.target.value;D.current&&(D.current.disabled=!t,t?D.current.classList.remove("not-allowed"):D.current.classList.add("not-allowed")),s(t)},classes:{root:t.root},InputProps:{className:t.input}}),r.a.createElement("p",{className:"label"},N),r.a.createElement("p",{className:"label"},V," \xa0\xa0",r.a.createElement("span",null,q))),r.a.createElement(U.a,{onTurnOnCamera:function(){f(!0),I.current&&I.current.classList.add("hidden");var e=document.querySelector(".heQTiL"),t=document.querySelector(".bVxZhR");e&&e.classList.add("full-height"),t&&t.classList.add("full-height")},onStartRecording:function(){f(!1),g(!0)},onRecordingComplete:function(e){g(!1),O(!0),z.current.append("Name",i),z.current=X(e,z.current),F.current=Y(F.current,z.current,n,$);var t=document.querySelector(".heQTiL");t&&t.classList.add("hidden");var a=document.querySelector(".bVxZhR");a&&a.classList.add("hidden")},showReplayControls:!1,countdownTime:j,timeLimit:_,isFlipped:!1,replayVideoAutoplayAndLoopOff:!0,renderDisconnectedView:function(){return r.a.createElement(r.a.Fragment,null)},renderLoadingView:function(){return r.a.createElement(W,null)}}),C&&r.a.createElement("div",{className:"mask"},x?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"result",dangerouslySetInnerHTML:{__html:'<svg data-icon="user-check" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"></path></svg>'}}),r.a.createElement(J.a,{classes:{root:t.buttonRoot,contained:t.contained},variant:"contained",size:"large",onClick:function(){window.location.pathname="/"}},r.a.createElement(G.a,null),"Back to Identity Page")):r.a.createElement(W,null)))},le=function(){return r.a.createElement(b,null,r.a.createElement(z,null,r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/register",component:ce}),r.a.createElement(i.a,{component:ne})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,n){},80:function(e,t,n){e.exports=n(127)},85:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.f2f70cdc.chunk.js.map